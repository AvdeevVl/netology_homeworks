# Домашнее задание к занятию "6.1. Типы и структура СУБД"

## Задача 1

Архитектор ПО решил проконсультироваться у вас, какой тип БД 
лучше выбрать для хранения определенных данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

- Электронные чеки в json виде
- Склады и автомобильные дороги для логистической компании
- Генеалогические деревья
- Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации
- Отношения клиент-покупка для интернет-магазина

Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

Ответ:  

- Электронные чеки в json виде  
    Документо-ориентированный NoSQL в которой данные хранятся в виде документов.

- Склады и автомобильные дороги для логистической компании  
    Графовые, Можно задавать дополнительные атрибуты для оптимизации пути.

- Генеалогические деревья  
    - Иерархическая база данных подходит для составления вертикального генеалогического дерева по восходящей схеме, объединяя прямых предков одного конкретного человека.
    Восходящая схема предполагает возведение во главу древа ребёнка, от которого в стороны будут расходиться две ветви – отец и мать. От каждого из родителей будут тянуться ещё по две ветви, их родители и т.д.
    В иерархической базе данные представлены в виде древовидной структуры (родитель - потомок). Каждая запись имеет не более одного родителя и несколько потомков.
    - Для составления полного генеалогического дерева, где учитываются все родственники, подходит база данных, использующая сетевую структуру, которая в отличие иерархической, где у одного узла может быть только один родительский узел, сетевой узел может иметь отношения с несколькими объектами.

- Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации   
     Ключ-значение для быстрого доступа к данным которые хранятся в оперативной памяти и возможность масштабирования.

- Отношения клиент-покупка для интернет-магазина  
    Реляционные БД, так как они обеспечивают связанность данных между различными таблицами между собой (например, список клиентов и список товаров).

## Задача 2

Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно 
CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если 
(каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):

- Данные записываются на все узлы с задержкой до часа (асинхронная запись)
- При сетевых сбоях, система может разделиться на 2 раздельных кластера
- Система может не прислать корректный ответ или сбросить соединение

А согласно PACELC-теореме, как бы вы классифицировали данные реализации?

Ответ:  

1. Данные записываются на все узлы с задержкой до часа (асинхронная запись)
    - CAP: CA
    - PACELC: PС/EL
2. При сетевых сбоях, система может разделиться на 2 раздельных кластера
    - CAP: AP
    - PACELC: PA/EL
3. Система может не прислать корректный ответ или сбросить соединение
    - CAP: CP
    - PACELC: PA/EC

## Задача 3

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

Ответ:  

Не могут. Принципы заложенные в эти системы противоречат друг другу.  
- ACID - высоконадежная система, в ней данные всегда консистентны, она обеспечивает надежность и предсказуемость.
- BASE системы - высокопроизводительные. Данные в них могут быть не верные, но в то же время, они всегда доступны.

## Задача 4

Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни
- реакция на истечение таймаута

Вы слышали о key-value хранилище, которое имеет механизм [Pub/Sub](https://habr.com/ru/post/278237/). 
Что это за система? Какие минусы выбора данной системы?

Ответ:  
Redis это key-value хранилище, имеет механизм Pub/Sub.

минусы Redis:
- Высокие требования к оперативной памяти сервера.
- Отсутствует поддержка языка SQL. В качестве альтернативы используют Lua-скрипты. Это требует от разработчиков дополнительного обучения. 
- Риск потери данных. Чтобы снизить вероятность, Redis сохраняет копии на жестком диске. Это помогает не потерять информацию в штатных ситуациях, например при перезагрузке сервера. В аварийных случаях данные из оперативной памяти будут утеряны и сохранятся только данные с последней синхронизации с диском.
- Нет ролевой модели доступов.
---
