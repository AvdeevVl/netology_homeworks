# Домашнее задание к занятию "5.1. Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения."


## Задача 1

Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.  


Ответ:  

- Полная (аппаратная): виртуализация использует ресурсы оборудования напрямую и распределяет их между виртуальными машинами. Гипервизор является операционной системой. При аппаратной виртуализации не требуется модифицировать гостевые ОС. При полной (аппаратной) виртуализации можно использовать любые гостевые операционные системы, которые поддерживают архитектуру физического оборудования.  
- Паравиртуализация: гостевые операционные системы подготавливаются для исполнения в виртуализированный среде, для чего их ядро незначительно модифицируется, это является недостатком метода. Требуется установленная хостовая операционная система, которая обеспечивает гипервизору доступ к ресурсам физического оборудования. паравиртуализация предлагает высокую производительность, почти как у реальной системы. При этом, как и при полной виртуализации, одновременно могут поддерживаться различные операционные системы. Но определенным недостатком паравиртуализации можно считать ограниченное количество поддерживаемых операционных систем. Поскольку есть необходимость вносить изменения в код ядра операционной системы, что не всегда представляется возможным в силу закрытости некоторых из них.
- Виртуализации средствами ОС: требуется установленная хостовая операционная система. Гостевая операционная система не имеет собственного ядра, использует ядро хоста. Этот метод позволяет запускать изолированные и безопасные ВМ на одном хосте, но не позволяет запускать операционные системы с ядрами, отличными от типа ядра хостовой операционной системы. Эта техника виртуализирует серверы непосредственно над операционной системой. Для разделения ресурсов одного сервера между контейнерами, данная виртуализация требует внесения изменений в ядро операционной системы.

Вывод: таким образом, отличие типов виртуализации состоит в том, каким образом гипервизор получает доступ к аппаратным ресурсам хоста. Необходимость хостовой ОС. Необходимость внесения изменения в драйверах и ядро гостевой и хостовой операционной системы.


---

## Задача 2

Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования.

Организация серверов:
- физические сервера,
- паравиртуализация,
- виртуализация уровня ОС.

Условия использования:
- Высоконагруженная база данных, чувствительная к отказу.
- Различные web-приложения.
- Windows системы для использования бухгалтерским отделом.
- Системы, выполняющие высокопроизводительные расчеты на GPU.

Опишите, почему вы выбрали к каждому целевому использованию такую организацию.


Ответ:  

| Условия | Организация | Почему |
| --- | --- | --- |
| Высоконагруженная база данных, чувствительная к отказу | физические сервера | Требуется высокая производительность, аппаратное размещение дает более высокий отклик, и сокращает точки отказа в виде гипервизора хостовой машины. Для надежности есть возможность использование кластеризацию средствами баз данных.|
| Различные web-приложения | виртуализация уровня ОС | Централизованное управление изолированными приложениями что дает простоту и гибкость в развертывании, а так же легкость масштабировать в зависимости от нагрузки сервисов. |
| Windows системы для использования бухгалтерским отделом | паравиртуализация | Hyper-V  ввиду быстроты и простоты развертывания и обслуживания. |
| Системы, выполняющие высокопроизводительные расчеты на GPU | физические сервера | Требуется прямой доступ к графическому оборудованию. |


---

## Задача 3

Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.
2. Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.
3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.
4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.


Ответ:  

1. Подойдут Hyper-V или vSphere. Хорошо поддерживают виртуальные машины с Windows и Linux, имеют встроенные возможности балансировки нагрузки, репликации, резервного копирования и кластеризации. 
2. Proxmox. Open source решение, хорошо поддерживает Linux и Windows гостевые ОС, по управлению и возможностям сравним с платными гипервизорами.
3. Hyper-V Server. Бесплатный максимально совместим c Windows гостевыми ОС.
4. Docker или LXC. Простота создания контейнеров для тестирования с использованием автоматизации.

---

## Задача 4

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.

Ответ:  

Недостатки гетерогенной системы виртуализации заключается в ее сложности эксплуатации, так как имеет различные интерфейсы и подходы к управлению и обслуживание, соответственно возрастают требования к квалификации персонала. Возможные проблемы могут возникать при распределение ресурсами, при миграции виртуальных машин между различными гипервизорами требуется их конвертация, например таких как VMWare и Hyper-V.  
Для того что бы минимизировать возможные проблемы нужно максимально распределить системы по совместимости и сервисам.  
Если бы был выбор, то лучше стремиться к однородной среде виртуализации для более легкого управления, автоматизации и обслуживание:
- миграция виртуальных машин между хостами
- репликация виртуальных машин
- балансировка нагрузками
- распределение ресурсами
